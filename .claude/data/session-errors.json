{
  "version": "1.0.0",
  "errors": [],
  "resolved_patterns": [
    {
      "signature": {
        "type": "runtime",
        "code": "MISSING_EXPORT",
        "pattern": "Function imported but not exported from module"
      },
      "resolution": "Added getCurrentUser function to middleware.ts. Added API route pre-flight check to KB.",
      "kb_file_updated": ".claude/knowledge/togetheros-kb.md",
      "resolved_date": "2025-12-04T03:00:00Z",
      "details": {
        "affected_files": [
          "apps/web/app/api/admin/support-points/route.ts",
          "apps/web/app/api/admin/reward-points/route.ts",
          "apps/web/app/api/admin/badges/route.ts"
        ],
        "missing_export": "getCurrentUser",
        "source_module": "@/lib/auth/middleware"
      }
    },
    {
      "signature": {
        "type": "runtime",
        "code": "MODULE_NOT_FOUND",
        "pattern": "Import from non-existent module file"
      },
      "resolution": "Created lib/db/badges.ts with required helper functions. Added module existence check to KB.",
      "kb_file_updated": ".claude/knowledge/togetheros-kb.md",
      "resolved_date": "2025-12-04T03:00:00Z",
      "details": {
        "affected_files": [
          "apps/web/app/api/admin/badges/route.ts"
        ],
        "missing_module": "@/lib/db/badges",
        "missing_exports": ["getBadgeStats", "getRecentBadgeAwards"]
      },
      "source": "https://www.applause.com/blog/bug-fix-verification-speed-up-development/"
    },
    {
      "id": "err-006",
      "signature": {
        "type": "process",
        "code": "INCOMPLETE_BRANCH_ANALYSIS",
        "pattern": "Analyzed only PRs when asked about branches AND PRs, missed squash-merged branches"
      },
      "occurrences": [
        {
          "session_date": "2025-12-04",
          "commit_sha": null,
          "file": null,
          "message": "User asked to check 'which branches and PRs are safe to merge'. Only checked open PRs, missed feature/onboarding-mystery-unlock which had commits ahead but was already squash-merged via PR #361.",
          "context": "Branch appeared in 'git branch --no-merged' output but was actually merged via squash. Should have cross-referenced with gh pr list --state all."
        }
      ],
      "resolution": "Added 'Branch/PR Merge Analysis Protocol' section to ci-cd-discipline.md. Solution: Always cross-reference 'not merged' branches with PR status using `gh pr list --head <branch> --state all` to detect squash-merged branches.",
      "kb_file_updated": ".claude/knowledge/ci-cd-discipline.md",
      "resolved_date": "2025-12-04T02:50:00Z",
      "source": "https://stackoverflow.com/questions/19308790/git-branch-merged-no-merged-and-squash-option"
    },
    {
      "id": "err-007",
      "signature": {
        "type": "config",
        "code": "SKILL_NOT_REGISTERED",
        "pattern": "Skill exists in .claude/skills/ but not in settings.local.json permissions"
      },
      "occurrences": [
        {
          "session_date": "2025-12-04",
          "commit_sha": null,
          "file": ".claude/skills/error-learner/SKILL.md",
          "message": "Skill(error-learner) invocation failed - skill exists but wasn't registered in settings.local.json allow list",
          "context": "User asked to use error-learner skill. Skill tool returned 'Unknown skill'. Had to manually read SKILL.md and execute steps."
        }
      ],
      "resolution": "Added Skill(error-learner) and Skill(ux-designer) to .claude/settings.local.json permissions allow list. Note: settings.local.json is gitignored (local config per machine).",
      "kb_file_updated": ".claude/settings.local.json (local, not tracked)",
      "resolved_date": "2025-12-04T03:15:00Z",
      "source": null
    }
  ],
  "last_updated": "2025-12-04T03:15:00Z"
}
